<!DOCTYPE html>
{% extends base.html %}
   {% block title %} Chat Game | Groups {% end %}
{% block content %}
      <div class="chat">
         <div class="top">
            <div class="info">
               <div class="name" style="margin-left: 160px;font-size: 40px; text-decoration: underline;">Groups</br>

               </div>
             </br>
             <h2><div align="right"><a href="/creategroup" >Create new Group</a></div></h2>
            </div>
         </div>
         <div>
         </br>
         <h2>Groups you're member of</h2>
         <ul class="memberof" style="height: 35%">
         {% for i,group in enumerate(groups_list) %}
          <li>
            <a name ="groupchatlink" href="/gchat" id={{group['_id'] }}> {{group['name'] }}</a>
          </li>
            {% if group['_id'] not in owner %}
                   <form action="/blockfriend" method="post">
                      <input type="hidden" name="block" value="group">
                      <input type="hidden" name="remove" value={{group['_id']}}>
                      <button type="submit" />leave group</button>
                   </form>
            {% end %}

           {% end %}
         </ul>
         <h2>All Groups</h2>
         <ul class="allgroups">
            {% for i,groupnin in enumerate(nin_grouplist) %}
              <li>
                  <!-- <a class ="groups" href="/gchat" id={{groupnin["_id"] }}> {{groupnin['name'] }}</a> -->
                  <p>{{groupnin['name'] }}</p>
                    <form action="/add" method="post">
                    <input type="hidden" name="add" value="group">
                      <input type="hidden" name="join" value={{groupnin['_id']}}>
                      <button type="submit" />Join group</button>
                    </form>

              </li>
           {% end %}

         </ul>


      </div>
   </div>
   <script src="static/zepto.min.js"></script>
   <script>
   function showDiv() {
   document.getElementById('createGroup').style.display = "block";
  var btn = document.getElementById('btnCreate');
  if ( btn.value == "Create Group") btn.value ="Create";
  else {btn.value = "Create Group";document.getElementById('createGroup').style.display = "none";}
  if ( document.getElementById("gName").value !="") {
    var gx = document.getElementById("gName").value ;
  }

  console.log(gx);
}
  //////////////////////////////////////////////////

  Zepto(function($){
        $('#btnLogin').click(function() {
            var h;
            h = window.location.host  + '/groupchat.html/?room=' + $('.groups').val(); //+ '&nick=' + $('#txtNickname').val();
            window.location = '/?gchat=' + $('.groups').val(); //+ '&nick=' + $('#txtNickname').val();
        });

        $(".groups").keyup(function(event) { update_send(); } );
        $("#txtNickname").keyup(function(event) { update_send(); } );

    });

    function update_send() {
        if ( $(".groups").val() != "" && $("#txtNickname").val() != "") {
            $("#btnLogin").removeAttr("disabled");
        } else {
            $("#btnLogin").attr("disabled", "disabled");
        }
    };

  ///////////////////////////////////////////////
</script>

{% end %}
   <script src="../static/js/gchat.js"></script>
